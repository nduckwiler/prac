<!doctype html>
<html>
<head>
<script src="https://d3js.org/d3.v5.js"></script>
<link rel="stylesheet"
  href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.14.2/styles/github.min.css">
<style>
svg {border: dotted 1px grey}

clipPath * {
  transition-property: r;
  transition-duration: 1s;
}
</style>
</head>
<body>
<h1>Transitions issue in d3.v5</h1>

<p>The red circle is defined with a <code>circle</code> element. The blue circle is defined with a <code>rect</code> element clipped by a <code>circle</code>.
The transitions for both "circles" are defined as follows:</p>

<pre><code class="JavaScript">circleNoClip.transition()
    .duration(duration)
    .ease(d3.easeBounce)
    .attr('r', finalRadius);

circleYesClip.transition()
    .duration(duration)
    .ease(d3.easeBounce)
    .attr('r', finalRadius);
</pre></code>

<p>where <code>circleNoClip</code> refers to the red circle and <code>circleYesClip</code> refers to the clip path defining the blue circle. <code>duration</code> and <code>finalRadius</code> are pre-defined variables.</p>

<p>Notice that the blue circle (the clipped rectangle) does not transition with a bounce, as expected.</p>

<button id="run-all-btn" type="button">Run transitions</button>
<div>
<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <defs>
  </defs>

</svg>
</div>

<script src="transition-issue.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.14.2/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

</body>
<html>
